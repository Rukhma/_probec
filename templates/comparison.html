{% load static%}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Probec - Comparison</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- Google fonts - Popppins for copy-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <!--orion icons-->
    <link rel="stylesheet" href="{% static 'css/orionicons.css' %}">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="{% static 'css/style.default.css' %}" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <!-- Font awesome-->
    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet" type='text/css'>
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://cdn.plot.ly/plotly-2.2.0.min.js"></script>
    <style>
        .btn-success {
            background-color: #78afe6;
            color: #CCE0F4;
        }
        
        .btn-success:hover {
            background-color: #4499ee;
            border-color: #4499ee;
        }
    </style>
</head>

<body>
    <!-- navbar-->

    <div class="d-flex align-items-stretch">
        <div id="sidebar" class="sidebar shrink show py-3" style="height: 100%;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;">
            <ul class="sidebar-menu list-unstyled">
                <li class="sidebar-list-item d-flex justify-content-start"><a href="#" id="pd-menu" class=" text-gray-500 ml-3 mr-lg-5 lead"><i class="fa fa-align-left"></i></a></li>
                <li class="sidebar-list-item">
                    <a href="dashboard" class="sidebar-link text-muted"><img src="{% static 'img/homepage.png' %}" alt="" class="mr-3" width="30" height="30"><span>Dashboard</span></a>
                </li>
                <li class="sidebar-list-item">
                    <a href="market_analysis" class="sidebar-link text-muted"><img src="{% static 'img/icons8-total-sales-50.png' %}" alt="" class="mr-3" width="30" height="30"><span>Market Analysis</span></a>
                </li>
                <li class="sidebar-list-item">
                    <a href="product_research" class="sidebar-link text-muted "><img src="{% static 'img/magnifying-glass.png' %}" alt="" class="mr-3" width="30" height="30"><span>Product Research</span></a>
                </li>
                <li class="sidebar-list-item">
                    <a href="product_tracking" class="sidebar-link text-muted "><img src="{% static 'img/keyword-research.png' %}" alt="" class="mr-3" width="30" height="30"></i><span>Product Tracking</span></a>
                </li>

                <li class="sidebar-list-item">
                    <a href="comaprison" class="sidebar-link text-muted active"><img src="{% static 'img/comparison.png' %}" alt="" class="mr-3" width="30" height="30"><span>Comparison </span></a>
                </li>
            </ul>
        </div>
        <div class="page-holder w-100 d-flex flex-wrap" style="margin-left: 7rem;align-content: flex-start;">
            <header class="header w-100 pb-1 mb-0" style="height:fit-content;">
                <nav class="navbar  px-4 py-2 bg-white shadow">
                    <a href="dashboard" class="navbar-brand"> <img src="{% static 'img/logo.png' %}" alt="" class="img-fluid logo" width="103" height="76"></a>
                    <ul class="ml-auto d-flex align-items-center list-unstyled mb-0">
                        <li class="nav-item dropdown ml-auto">
                            <a id="userInfo" href="http://example.com" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle"><img src="{% static 'img/user icon.png' %}" alt="Jason Doe" style="max-width: 2.5rem;" class="img-fluid rounded-circle shadow"></a>
                            <div aria-labelledby="userInfo" class="dropdown-menu"><a href="#" class="dropdown-item"><strong class="d-block text-uppercase headings-font-family">{{ user}}</strong></a>
                                <div class="dropdown-divider"></div><a href="signin" class="dropdown-item">Logout</a>
                            </div>
                        </li>
                    </ul>
                </nav>
            </header>
            <div class="container-fluid w-100 px-xl-5 pt-0">
                <form action="search_comparison" method="GET">
                    <h5 class="pb-4 pt-3">Comparison</h5>
                    <div class="row">

                        <div class="col-lg-4 col-md-4 col-sm-12"><input name="pro_f" id="pro_f" class="form-control mb-3" type="text" placeholder="First Product Name" aria-label="default input example"></div>
                        <div class="col-lg-4 col-md-4 col-sm-12"><input name="pro_s" id="pro_s" class="form-control mb-3" type="text" placeholder="Second Product Name" aria-label="default input example"></div>
                    </div>



                    <button type="submit" class="btn btn-success mt-3 mb-0">Generate Comparsion</button>
                </form>
                

                <div class="table-responsive mt-4" style="margin-top: -10%;">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">{{product_f | capfirst}}</th>
                                <th scope="col">{{product_s | capfirst}}</th>
                                <th scope="col">Actions</th>



                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">Avg Weekly Sales</th>
                                <td>{{average_sales_f}}</td>
                                <td>{{average_sales_s}}</td>
                                <td><button id2="{{average_sales_s}}" id1="{{average_sales_f}}" id="Sales" name_f="{{product_f}}" name_s="{{product_s}}" class="btn btn-primary triger-model">Generate Graph</td>

                            </tr>
                            <tr>
                                <th scope="row">Avg Weekly Revenue</th>
                                <td>{{average_revenue_f}}</td>
                                <td>{{average_revenue_s}}</td>
                                <td><button id2="{{average_revenue_s}}" id1="{{average_revenue_f}}" id="Revenue" name_f="{{product_f}}" name_s="{{product_s}}" class="btn btn-primary triger-model">Generate Graph</td>

                            </tr>
                            <tr>
                                <th scope="row" >Avg Price</th>
                                <td >{{average_price_f}}</td>
                                <td >{{average_price_s}}</td>
                                <td><button id2="{{average_price_s}}" id1="{{average_price_f}}" id="Price" name_f="{{product_f}}" name_s="{{product_s}}"  class="btn btn-primary triger-model" >Generate Graph</a></td>

                            </tr>
                            <tr>
                                <th scope="row" >Total Products</th>
                                <td >{{total_prod_f}}</td>
                                <td >{{total_prod_s}}</td>
                                <td><button id2="{{total_prod_s}}" id1="{{total_prod_f}}" id="Total Products" name_f="{{product_f}}" name_s="{{product_s}}"  class="btn btn-primary triger-model" >Generate Graph</a></td>


                            </tr>
                            <tr>
                                <th scope="row" >Total Brands</th>
                                <td >{{total_brand_f}}</td>
                                <td >{{total_brand_s}}</td>
                                <td><button id2="{{total_brand_s}}" id1="{{total_brand_f}}" id="Total Brands" name_f="{{product_f}}" name_s="{{product_s}}"  class="btn btn-primary triger-model" >Generate Graph</a></td>
                                    

                            </tr>
                            <tr>
                                <th scope="row" >Average Rating</th>
                                <td >{{average_rating_f}}</td>
                                <td >{{average_rating_s}}</td>
                                <td><button id2="{{average_rating_s}}" id1="{{average_rating_f}}" id="Rating" name_f="{{product_f}}" name_s="{{product_s}}"  class="btn btn-primary triger-model" >Generate Graph</a></td>

                            </tr>
                        </tbody>
                    </table>

                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel"><span id="result_name"></span></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div id="graph_modal" class=" justify-content-center">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>

    </div>

<!--SCRIPT TO LOAD GRAPH IN MODAL-->
<script>
    $(".triger-model").click(function(e) {
        e.preventDefault();
        $.ajax({
            url: "{% url 'pro_research:plot_graph_bar' %}",
            data:{
                g_name:$(this).attr('id'),
                value_f: $(this).attr('id1'),
                value_s: $(this).attr('id2'),
                name_f: $(this).attr('name_f'),
                name_s: $(this).attr('name_s') 
            },
            success: function(json) {
                $('#exampleModal').modal("show");
                document.getElementById("result_name").innerHTML = json['name'];
                $('#graph_modal').html("{% autoescape off %}" + json['result'] + "{% endautoescape %}");
            
            },
            error: function(xhr, errmsg, er) {
                alert(er + "," + errmsg);
            }
    });
    });
    $(".close").click(function(e) {
        $('#exampleModal').modal("hide");
    });
</script>
    <!-- JavaScript files-->
    <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'vendor/popper.js/umd/popper.min.js' %}">
    </script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'vendor/jquery.cookie/jquery.cookie.js' %}">
    </script>
    <script src="{% static 'vendor/chart.js/Chart.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="{% static 'js/charts-home.js' %}"></script>
    <script src="{% static 'js/front.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    <script>
        window.onload = function() {
            document.getElementById('close').onclick = function() {
                document.getElementById("card").style.display = "none";
            };
        };
    </script>
</body>

</html>